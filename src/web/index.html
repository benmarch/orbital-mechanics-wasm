<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Orbital Mechanics</title>

    <script src="om.js"></script>
    <script src="utils.js"></script>
    <link rel="import" href="components/AdjustableInput.html">
    <link rel="import" href="components/StateVectorGenerator.html">
    <link rel="import" href="components/ClassicalElementsGenerator.html">

    <style>
        .wide-column {
            width: 40%;
            float: left;
        }
        .narrow-column {
            width: 20%;
            float: left;
        }
    </style>

    <script>
        // initialize app
        Module.onRuntimeInitialized = function() {
            document.getElementById('app').innerHTML = `
                <div class="wide-column">
                    <state-vector-generator></state-vector-generator>
                </div>
                <div class="narrow-column">
                    <button onclick="transferStateVectors()">Copy State Vectors --></button>
                </div>
                <div class="wide-column">
                    <classical-elements-generator></classical-elements-generator>
                </div>
            `;

            const elementsGenerator = document.querySelector('classical-elements-generator');
            document.querySelector('state-vector-generator').addEventListener('input', event => {
                elementsGenerator.updateWithStateVectors(event.target.value);
            });
        }

        function transferStateVectors() {
            const stateVectors = document.querySelector('state-vector-generator').getStateVectors();
            document.querySelector('classical-elements-generator').updateWithStateVectors(stateVectors);
        }
    </script>
</head>
<body>

<div id="app"></div>

</body>
</html>